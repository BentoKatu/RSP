-- This is a basic Lua script for Roblox that creates a GUI menu with toggles for ESP (Extra Sensory Perception) and Aimbot.
-- WARNING: Using cheats like this violates Roblox's Terms of Service and can result in bans. This is for educational purposes only.
-- To use this, you need a Roblox exploit/injector that allows running custom Lua scripts in-game (e.g., Synapse X, Krnl, etc.).
-- Paste this into your exploit's script executor and run it in a Roblox game.

-- Create the GUI menu
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.Name = "CheatMenu"

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 300, 0, 200)
Frame.Position = UDim2.new(0.5, -150, 0.5, -100)
Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Frame.BorderSizePixel = 2
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "Cheat Menu"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.Parent = Frame

-- ESP Toggle
local ESPToggle = Instance.new("TextButton")
ESPToggle.Size = UDim2.new(0.8, 0, 0, 40)
ESPToggle.Position = UDim2.new(0.1, 0, 0.2, 0)
ESPToggle.Text = "ESP: OFF"
ESPToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
ESPToggle.Parent = Frame

-- Aimbot Toggle
local AimbotToggle = Instance.new("TextButton")
AimbotToggle.Size = UDim2.new(0.8, 0, 0, 40)
AimbotToggle.Position = UDim2.new(0.1, 0, 0.5, 0)
AimbotToggle.Text = "Aimbot: OFF"
AimbotToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
AimbotToggle.Parent = Frame

-- Variables for features
local ESPEnabled = false
local AimbotEnabled = false
local ESPConnections = {}
local AimbotConnection = nil

-- Function to create ESP for a player
local function CreateESP(player)
    if player == game.Players.LocalPlayer then return end
    local character = player.Character
    if not character then return end

    local highlight = Instance.new("Highlight")
    highlight.Adornee = character
    highlight.FillColor = Color3.fromRGB(255, 0, 0)
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.Parent = character

    table.insert(ESPConnections, highlight)
end

-- Function to remove ESP
local function RemoveESP()
    for _, conn in ipairs(ESPConnections) do
        if conn and conn.Parent then
            conn:Destroy()
        end
    end
    ESPConnections = {}
end

-- Function to enable/disable ESP
local function ToggleESP()
    ESPEnabled = not ESPEnabled
    ESPToggle.Text = "ESP: " .. (ESPEnabled and "ON" or "OFF")
    if ESPEnabled then
        for _, player in ipairs(game.Players:GetPlayers()) do
            CreateESP(player)
        end
        -- Listen for new players
        game.Players.PlayerAdded:Connect(function(player)
            if ESPEnabled then
                CreateESP(player)
            end
        end)
    else
        RemoveESP()
    end
end

-- Aimbot function (basic: aims at closest enemy)
local function Aimbot()
    if not AimbotEnabled then return end
    local localPlayer = game.Players.LocalPlayer
    local camera = workspace.CurrentCamera
    local mouse = localPlayer:GetMouse()

    local closestPlayer = nil
    local closestDistance = math.huge

    for _, player in ipairs(game.Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local distance = (player.Character.HumanoidRootPart.Position - localPlayer.Character.HumanoidRootPart.Position).Magnitude
            if distance < closestDistance then
                closestDistance = distance
                closestPlayer = player
            end
        end
    end

    if closestPlayer then
        local targetPos = closestPlayer.Character.HumanoidRootPart.Position
        camera.CFrame = CFrame.new(camera.CFrame.Position, targetPos)
    end
end

-- Function to toggle Aimbot
local function ToggleAimbot()
    AimbotEnabled = not AimbotEnabled
    AimbotToggle.Text = "Aimbot: " .. (AimbotEnabled and "ON" or "OFF")
    if AimbotEnabled then
        AimbotConnection = game:GetService("RunService").RenderStepped:Connect(Aimbot)
    else
        if AimbotConnection then
            AimbotConnection:Disconnect()
            AimbotConnection = nil
        end
    end
end

-- Connect toggles
ESPToggle.MouseButton1Click:Connect(ToggleESP)
AimbotToggle.MouseButton1Click:Connect(ToggleAimbot)

-- Make the menu draggable
local dragging = false
local dragInput
local dragStart
local startPos

local function updateInput(input)
    local delta = input.Position - dragStart
    Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

Frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = Frame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        updateInput(input)
    end
end)

print("Cheat menu loaded. Use the GUI to toggle ESP and Aimbot.")
